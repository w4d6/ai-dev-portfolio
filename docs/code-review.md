# コードレビュー結果

**レビュー対象**: AI Development Portfolio サイト
**レビュー日**: 2026-02-12
**レビュアー**: シニアフロントエンドエンジニア

---

## 1. HTML (`index.html`)

### 1.1 セマンティクス

| 項目 | 評価 | 詳細 |
|------|------|------|
| HTML5要素の使用 | ✅ 問題なし | `<nav>`, `<section>`, `<article>`, `<footer>` を適切に使用 |
| 見出し階層 | ✅ 問題なし | `<h1>` → `<h2>` → `<h3>` が正しい順序で使用されている |
| `<article>` の使用 | ✅ 問題なし | Works セクションの各カードに `<article>` を使用しており適切 |
| `<main>` 要素 | ❌ 要修正 | **`<main>` ランドマーク要素が欠落している。** `<nav>` と `<footer>` の間のコンテンツを `<main>` で囲むべき。スクリーンリーダーやSEOにおいてページの主要コンテンツ領域を示すために重要 |
| `<nav>` 内の構造 | ⚠️ 改善推奨 | ハンバーガーメニューの `<span>` 要素に意味がない。`aria-hidden="true"` を付与するのが望ましい |

### 1.2 アクセシビリティ

| 項目 | 評価 | 詳細 |
|------|------|------|
| `aria-label` | ✅ 問題なし | ハンバーガーボタンに `aria-label="Menu"` が設定されている |
| `aria-expanded` | ✅ 問題なし | ハンバーガーボタンの開閉状態を適切に管理 |
| 画像の `alt` 属性 | ⚠️ 改善推奨 | Hero背景画像は装飾目的のため `alt=""` で適切だが、Works セクションのプレースホルダー画像の `alt` が汎用的すぎる（「AI開発プロジェクト 1」等）。各プロジェクトの内容を具体的に記述すべき（例: 「Claude APIを使ったチャットアシスタントの画面」） |
| キーボードナビゲーション | ⚠️ 改善推奨 | カード画像クリックでモーダルが開くが、`<div class="card__image">` にはキーボードフォーカスが当たらない。`tabindex="0"` と `role="button"` の追加、または `<button>` 要素でラップすることを推奨 |
| フォーカス管理 | ⚠️ 改善推奨 | モーダルオープン時のフォーカストラップが未実装。モーダル内でTabキーによるフォーカスがモーダル外に逃げる可能性がある |
| スキップリンク | ❌ 要修正 | **スキップナビゲーションリンクが存在しない。** キーボードユーザーのために `<a href="#main-content" class="skip-link">コンテンツへスキップ</a>` を追加すべき |
| `lang` 属性 | ⚠️ 改善推奨 | `<html lang="ja">` は適切だが、英語テキスト部分（"AI Development Portfolio" 等）に `lang="en"` を指定するとスクリーンリーダーの読み上げが改善される |

### 1.3 SEO

| 項目 | 評価 | 詳細 |
|------|------|------|
| `<meta description>` | ✅ 問題なし | 適切な説明文が設定されている |
| `<title>` | ✅ 問題なし | 簡潔で適切 |
| `<meta theme-color>` | ✅ 問題なし | ブランドカラーに合致 |
| OGP / Twitter Card | ❌ 要修正 | **`og:title`, `og:description`, `og:image`, `twitter:card` 等のソーシャルメタタグが完全に欠落。** SNSでシェアされた際のプレビューが適切に表示されない |
| 構造化データ | ⚠️ 改善推奨 | JSON-LD による構造化データ（`Person` / `WebSite` schema）の追加を推奨。検索結果でのリッチスニペット表示に有効 |
| canonical URL | ⚠️ 改善推奨 | `<link rel="canonical">` が未設定。GitHub Pages デプロイ後に重複コンテンツ問題を防ぐために設定推奨 |
| `favicon` | ❌ 要修正 | **`<link rel="icon">` が設定されていない。** ブラウザタブやブックマークでアイコンが表示されない |

### 1.4 パフォーマンス

| 項目 | 評価 | 詳細 |
|------|------|------|
| `preconnect` | ✅ 問題なし | Google Fonts に対して適切に `preconnect` が設定されている |
| 画像の `loading` | ✅ 問題なし | Hero画像は `loading="eager"`、カード画像は `loading="lazy"` と適切に使い分け |
| 画像の `width`/`height` | ✅ 問題なし | カード画像に明示的なサイズ指定があり、CLS防止に寄与 |
| Hero画像のサイズ指定 | ⚠️ 改善推奨 | Hero背景画像（`hero__bg-image`）に `width`/`height` 属性がない。フルスクリーン画像のため影響は限定的だが、CSSで `aspect-ratio` を指定するか属性を追加すると良い |
| CSS/JS の読み込み | ⚠️ 改善推奨 | `main.js` は `</body>` 直前で読み込まれており適切。ただし、`defer` 属性を `<head>` 内で使用する方がモダンなアプローチ |
| CSS の `display: swap` | ✅ 問題なし | Google Fonts の読み込みに `display=swap` パラメータが含まれている |

---

## 2. CSS (`src/styles/main.css`)

### 2.1 デザインシステム準拠（design-prompt.yaml との整合性）

| 項目 | 評価 | 詳細 |
|------|------|------|
| カラーパレット | ✅ 問題なし | CSS変数の値がdesign-prompt.yamlの定義と完全に一致 |
| フォント定義 | ✅ 問題なし | `--font-primary` のフォントスタックがYAMLの `font_families.primary.stack` と一致 |
| アクセントフォント | ⚠️ 改善推奨 | `--font-accent: "Cormorant Garamond"` が使用されているが、design-prompt.yaml にはアクセントフォントの定義がない。デザインシステムとの乖離に注意。ただしサイトの品質には貢献している |
| スペーシング | ✅ 問題なし | CSS変数のスペーシングスケールがYAMLの定義と一致 |
| コンポーネントスタイル | ✅ 問題なし | カード、ボタン、バッジ、プログレスバー等がYAML定義に忠実に実装 |
| シャドウ定義 | ✅ 問題なし | `--shadow-sm`, `--shadow-md`, `--shadow-accent` がYAMLと一致 |
| セクションディバイダー | ✅ 問題なし | 幅40px、高さ3px、プライマリカラーでYAML仕様通り |

### 2.2 レスポンシブデザイン

| 項目 | 評価 | 詳細 |
|------|------|------|
| ブレークポイント | ✅ 問題なし | 1024px（タブレット）、768px（モバイル）、480px（小型デバイス）の3段階で適切 |
| グリッドレスポンシブ | ✅ 問題なし | 3列 → 2列 → 1列の変化がYAMLの `responsive` 定義に準拠 |
| `clamp()` の使用 | ✅ 問題なし | Hero タイトル等でfluidなフォントサイズを実現（`clamp(32px, 6vw, 56px)`） |
| モバイルメニュー | ✅ 問題なし | 768px以下でハンバーガーメニューに切り替わる |
| コンテンツパディング | ✅ 問題なし | ブレークポイントごとに適切に調整（24px → 32px → 20px） |
| About Stats | ✅ 問題なし | モバイルで横並び、480px以下で縦並びに適切に変化 |

### 2.3 パフォーマンス

| 項目 | 評価 | 詳細 |
|------|------|------|
| `will-change` | ✅ 問題なし | 不要な `will-change` の使用がなく、GPUレイヤーの乱用なし |
| アニメーション | ✅ 問題なし | `transform` と `opacity` のみをアニメーションしておりパフォーマンスに配慮 |
| `overflow-x: hidden` | ⚠️ 改善推奨 | `body` に `overflow-x: hidden` が設定されている。横スクロールの根本原因を特定して修正する方が望ましい。一部のアクセシビリティツールでは問題になる場合がある |
| `backdrop-filter` | ✅ 問題なし | `-webkit-backdrop-filter` のプレフィックスが付与されている |
| `prefers-reduced-motion` | ❌ 要修正 | **`prefers-reduced-motion` メディアクエリが未実装。** アニメーションを無効にする設定のユーザーに対して、すべてのアニメーション（Hero zoom、fade-in、スクロールライン等）が再生され続ける。アクセシビリティガイドライン（WCAG 2.1 Success Criterion 2.3.3）違反の可能性 |

### 2.4 保守性

| 項目 | 評価 | 詳細 |
|------|------|------|
| CSS変数 | ✅ 問題なし | デザイントークンがすべて `:root` のCSS変数で一元管理されている |
| BEM命名規則 | ✅ 問題なし | `block__element--modifier` パターンが一貫して適用（`nav__links`, `hero__title`, `btn--primary` 等） |
| リセットCSS | ✅ 問題なし | 必要最小限のリセットが適切に記述されている |
| コードの整理 | ✅ 問題なし | セクションコメントによる論理的な構造分けが明確 |
| マジックナンバー | ⚠️ 改善推奨 | `height: 72px`（ナビゲーション高さ）がハードコードされている。CSS変数化すると、JSでの `navHeight` 計算と一貫性が保てる |

---

## 3. JavaScript (`src/scripts/main.js`)

### 3.1 パフォーマンス

| 項目 | 評価 | 詳細 |
|------|------|------|
| `IntersectionObserver` の使用 | ✅ 問題なし | スクロールアニメーションに適切に使用。`scroll` イベントのポーリングではなく効率的 |
| `passive: true` | ✅ 問題なし | `scroll` イベントリスナーに `passive: true` が設定されておりスクロールパフォーマンスに配慮 |
| `unobserve` | ✅ 問題なし | 一度表示された要素は `unobserve` で監視解除しており、不要な処理を防止 |
| Observer の数 | ⚠️ 改善推奨 | 3つの `IntersectionObserver`（`fadeObserver`, `skillObserver`, `sectionObserver`）が使用されている。`fadeObserver` と `skillObserver` は統合可能。ただし現状でもパフォーマンスへの大きな影響はない |
| scroll イベントのスロットリング | ⚠️ 改善推奨 | `handleNavScroll` にスロットリング/デバウンスが未実装。`requestAnimationFrame` でラップすると高頻度な DOM 操作を防げる |

### 3.2 エラーハンドリング

| 項目 | 評価 | 詳細 |
|------|------|------|
| null チェック | ✅ 問題なし | `hamburger && navLinks`, `if (skillsGrid)`, `if (target)`, `if (img)` 等、DOM要素の存在確認が適切 |
| `nav` の null チェック | ⚠️ 改善推奨 | `handleNavScroll` 内で `nav` が null の場合の考慮がない。`const nav = document.getElementById("nav")` の直後で null チェックを行うか、`handleNavScroll` 内でガードを入れると安全 |
| `parseInt` の基数 | ✅ 問題なし | `parseInt(delay, 10)` で基数10が明示的に指定されている |
| モーダルの `img` 参照 | ✅ 問題なし | `card.querySelector("img")` の結果を null チェックしてから使用 |

### 3.3 ベストプラクティス

| 項目 | 評価 | 詳細 |
|------|------|------|
| IIFE | ✅ 問題なし | 即時実行関数でスコープが適切に隔離されている |
| `"use strict"` | ✅ 問題なし | Strict mode が有効化されている |
| DOM操作 | ✅ 問題なし | `querySelectorAll` + `forEach` による効率的な要素操作 |
| イベント委任 | ⚠️ 改善推奨 | カード画像のクリックイベントは各要素に個別にバインドされている。イベント委任（親要素で `click` をリッスンしてターゲットを判定）にすると、動的に追加されるカードにも対応できる |
| モーダルの body スタイル直接操作 | ⚠️ 改善推奨 | `document.body.style.overflow = "hidden"` の直接操作は、他のスクリプトとの競合リスクがある。CSS クラス（`body.modal-open { overflow: hidden; }`）でのトグルが望ましい |
| ESC キーでのモーダル閉じ | ✅ 問題なし | `keydown` イベントで `Escape` キーを適切にハンドリング |
| Active Nav の style 直接操作 | ⚠️ 改善推奨 | `a.style.color = "var(--color-primary)"` の inline style 操作ではなく、CSS クラス（例: `nav__link--active`）の付け替えが望ましい。CSSとの関心の分離が保たれ、スタイル変更がCSSに集約される |

---

## 4. 画像アセット

| 項目 | 評価 | 詳細 |
|------|------|------|
| フォーマット | ⚠️ 改善推奨 | WebP 形式が使用されているのは良い。ただし **PNG 版（placeholder_1.png 等）が残存しており、不要なファイルサイズを占めている。** PNG ファイルはビルドプロセスの入力元として必要でなければ削除すべき |
| ファイルサイズ | ✅ 問題なし | プレースホルダーWebP画像は1.5KB前後と極めて軽量。生成画像もhero-bg.webp（107KB）、about-bg.webp（90KB）と適切な範囲 |
| `alt` 属性 | ⚠️ 改善推奨 | 前述の通り、Works セクションの画像 `alt` がより具体的であるべき |
| `loading="lazy"` | ✅ 問題なし | ファーストビュー外のカード画像すべてに `loading="lazy"` が設定されている |
| `width`/`height` 属性 | ✅ 問題なし | カード画像に `width="400" height="300"` が設定されCLS対策済み |
| `<picture>` 要素 / フォールバック | ⚠️ 改善推奨 | WebP非対応ブラウザへのフォールバックがない。`<picture>` 要素で PNG/JPEG フォールバックを提供すると安全。ただし現代のブラウザではWebPサポートが広いため優先度は低い |

---

## 5. デプロイ設定 (`.github/workflows/deploy.yml`)

### 5.1 セキュリティ

| 項目 | 評価 | 詳細 |
|------|------|------|
| パーミッション | ✅ 問題なし | `contents: read`, `pages: write`, `id-token: write` と最小権限原則に準拠。write パーミッションはPages デプロイに必要な最小限 |
| 同時実行制御 | ✅ 問題なし | `concurrency` グループで重複デプロイを防止。`cancel-in-progress: false` で進行中のデプロイが中断されないよう設定 |
| アクションのバージョン固定 | ⚠️ 改善推奨 | `actions/checkout@v4` 等のメジャーバージョンタグ指定は実用上問題ないが、**SHA ハッシュによるピン止め**（例: `actions/checkout@abcdef123...`）がセキュリティ上はベスト。サプライチェーン攻撃のリスクを低減できる |

### 5.2 パス整合性

| 項目 | 評価 | 詳細 |
|------|------|------|
| アーティファクトパス | ⚠️ 改善推奨 | `path: '.'` でリポジトリ全体をアップロードしている。`.git/`, `node_modules/`, `docs/`, 設計ファイル（`design-prompt.yaml`）等の不要なファイルも含まれる。**公開に必要なファイル（`index.html`, `src/`, `assets/`）のみを含むディレクトリを指定するか、`.github/workflows` 内で `dist/` ディレクトリにコピーしてからアップロードする方が安全でクリーン** |
| GitHub Pages 設定 | ✅ 問題なし | `actions/configure-pages@v5` + `actions/deploy-pages@v4` の標準的な組み合わせ |
| トリガー設定 | ✅ 問題なし | `main` ブランチへの push と `workflow_dispatch`（手動実行）が設定されている |

### 5.3 ワークフロー構成

| 項目 | 評価 | 詳細 |
|------|------|------|
| Environment 設定 | ✅ 問題なし | `github-pages` 環境が適切に設定されている |
| ビルドステップ | ✅ 問題なし | 静的サイトのためビルドステップ不要で問題ない |
| キャッシュ | ⚠️ 改善推奨 | 依存関係がないため現状では不要だが、将来的にビルドプロセスを追加する場合はキャッシュ設定を検討 |

---

## 総合サマリー

### 重要な修正事項（❌ 要修正）

1. **`<main>` 要素の追加** — アクセシビリティ・SEOの基本要素が欠落
2. **スキップナビゲーションリンクの追加** — キーボードユーザビリティの必須要件
3. **OGP / ソーシャルメタタグの追加** — SNSシェア時のプレビュー表示に必須
4. **favicon の追加** — ブランドアイデンティティの基本
5. **`prefers-reduced-motion` の対応** — WCAG準拠のアクセシビリティ要件

### 改善推奨事項（⚠️ 上位）

1. カード画像のキーボードアクセシビリティ（`tabindex`, `role`）
2. モーダルのフォーカストラップ実装
3. デプロイ時のアーティファクトパスの最適化
4. Active Nav リンクのスタイル操作をCSS クラスベースに変更
5. scroll イベントの `requestAnimationFrame` によるスロットリング

### 評価が高い点

- **BEM命名規則の一貫した適用** — CSSの保守性が高い
- **CSS変数によるデザイントークン管理** — design-prompt.yaml との整合性が優れている
- **IntersectionObserver の適切な活用** — スクロールパフォーマンスへの配慮
- **IIFE + strict mode** — JavaScript のスコープ管理とエラー検出
- **レスポンシブデザイン** — 3段階のブレークポイントで適切に対応
- **画像最適化** — WebP形式、lazy loading、明示的なサイズ指定
- **GitHub Actions の最小権限設定** — セキュリティベストプラクティス準拠

---

## 総合評価スコア

| カテゴリ | スコア | 内訳 |
|----------|--------|------|
| HTML セマンティクス | 7 / 10 | `<main>` 欠落、スキップリンクなし |
| アクセシビリティ | 6 / 10 | キーボード操作、フォーカス管理、`prefers-reduced-motion` |
| SEO | 6 / 10 | OGP欠落、favicon なし、構造化データなし |
| CSS 品質 | 9 / 10 | デザインシステム準拠、BEM、変数管理が優秀 |
| JavaScript 品質 | 8 / 10 | 全体的に良好、minor な改善余地あり |
| パフォーマンス | 8 / 10 | 画像最適化、lazy loading が適切 |
| デプロイ設定 | 8 / 10 | セキュリティ・構成は良好、パス最適化の余地あり |
| 画像アセット | 7 / 10 | WebP使用は良いが不要ファイルの残存あり |

### **総合スコア: 74 / 100**

全体として、**デザインシステムの忠実な実装とCSS/JSの品質は高水準**です。主要な減点はアクセシビリティとSEOのメタデータ周りに集中しています。上記の「❌ 要修正」5項目を対応することで、**85点以上**に到達できると見込みます。特に `<main>` 要素の追加、OGPメタタグ、`prefers-reduced-motion` の3点は早期に対応すべきです。
